
<div class="modal-dialog" role="document">
    <div class="modal-content" {{modalData.error}}>

            {% if modalData.modal_type =='promote_modal' %}
                  <div class="modal-header">
                     <h5 class="modal-title">Student Promote Details</h5>
                     <button type="button" class="close" data-dismiss="modal" id="closeModal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                     </button>
                  </div>
                  <div class="modal-body">
                     <div class="row">
                        <div class="col-sm-12">
                           <div class="card">
                              <div class="card-body">
                                 <!-- {{ data|dump}} -->
                                 <form method="post" enctype="multipart/form-data" action="{{config.baseUrl}}admin/studentAcademicMaster/addSubmit">
                                    <div class="row">
                                       <input type="hidden" name="id" value="{{modalData.data.id}}">
                                       <!-- <div class="col-12">
                                          <h5 class="form-title"><span>Student Information</span></h5>
                                       </div> -->
                                       
                                       <div class="col-12 col-sm-3">
                                          <div class="form-group">
                                             <label>GR No </label>
                                             <input type="text" required name="GRNo" class="form-control" placeholder=" Student GR No">
                                          </div>
                                       </div>

                                       <div class="col-12 col-sm-3">
                                          <div class="form-group">
                                             
                                             <label> Academic year</label>
                                             <select name="academicYear" required class="form-control select">
                                                   <option value="">Select year</option>
                                                   {% for yy in modalData.data.years %}
                                                   <option value="{{yy}}" {{"selected" if (modalData.data.cyear==yy) else ""}}>{{yy}}</option>
                                                   {% endfor %}
                                                   
                                             </select>
                                          </div>
                                       </div>

                                       <div class="col-12 col-sm-3">
                                             <div class="form-group">
                                                <label> Select class</label>
                                                <select name="selectClass" required class="form-control select">
                                                      <option value="">Select class</option>
                                                      
                                                      {% for row in modalData.data.classes %}
                                                      <option value="{{row.value}}" >{{row.key}}</option>
                                                     {% endfor %}
                                                </select>
                                             </div>
                                       </div>

                                          

                                       <div class="col-12 col-sm-3">
                                          <div class="form-group">
                                             <label> Select section</label>
                                             <select name="section" class="form-control select">
                                                <option value="">Select section</option>

                                                <option value="A">A</option>
                                                <option value="B">B</option>
                                                <option value="C">C</option>
                                                <option value="D">D</option>   
                                                <option value="E">E</option>
                                                <option value="F">F</option> 
                                                <option value="G">G</option>
                                             </select>
                                          </div>
                                          </div>

                                          <div class="col-12 col-sm-3">
                                             <div class="form-group">
                                                <label>Admission fees</label>
                                                <input type="number" placeholder="Ex. 123" required name="admissionFees" class="form-control">
                                             </div>
                                          </div>

                                          
                                          <div class="col-12 col-sm-3">
                                             <div class="form-group"> 
                                                <label>Select month</label>
                                                <select class="test dropdownchange form-control" name="monthly_fees" multiple="multiple" id="monthsfeesselection">
                                                     
                                                       {% for row in modalData.data.academic_months %}
                                                         <option value="{{row.value +'``'+row.key}}" selected>{{row.key}}</option>
                                                      {% endfor %}
                                               </select>
                                             </div>
                                          </div>

                                          <div class="col-12 col-sm-3">
                                             <div class="form-group">
                                                <label>Per month fees</label>
                                                <input type="number" value="" required name="currentYearMonthFees"  id="value_monthsfeesselection" class="form-control" >
                                             </div>
                                          </div>

                                          <div class="col-12 col-sm-3">
                                             <div class="form-group">
                                                <label>Prev. year bal.</label>
                                                <input type="number" value="0" required name="previousYearBal" class="form-control">
                                             </div>
                                          </div>
                                          
                                    </div>
                                    <div class="row">
                                      

                                       <div class="col-12 col-sm-3">
                                             <div class="form-group"> 
                                                <label>Month for transport</label>
                                                <select class="test dropdownchange form-control" multiple="multiple" id="transportmonthsfeesselection" name="transportmonths">
                                                       {% for row in modalData.data.academic_months %}
                                                         <option value="{{row.value +'``'+row.key}}" >{{row.key}}</option>
                                                      {% endfor %}
                                               </select>
                                             </div>
                                       </div>
                                       <div class="col-12 col-sm-3">
                                          <div class="form-group">
                                             <label>Transport fees / month</label>
                                             <input type="number" value="0" readonly required id="value_transportmonthsfeesselection" name="transportfeesmonths" class="form-control">
                                          </div>
                                       </div>

                                       <div class="col-12 col-sm-3">
                                          <div class="form-group"> 
                                             <label>Month for Exam fees</label>
                                             <select class="test dropdownchange form-control" multiple="multiple" id="exammonthsfeesselection" name="examfeesmonths">
                                                    {% for row in modalData.data.academic_months %}
                                                      <option value="{{row.value +'``'+row.key}}" >{{row.key}}</option>
                                                   {% endfor %}
                                            </select>
                                          </div>
                                         
                                    </div>
                                    <div class="col-12 col-sm-3">
                                       <div class="form-group">
                                          <label>Exam fees for months</label>
                                          <input type="number" value="0" readonly required name="examfees" id="value_exammonthsfeesselection" class="form-control">
                                       </div>
                                    </div>

                                      
                                    </div>

                                    <div class="row">     
                                       <div class="col-12">
                                          <button type="submit" class="btn btn-primary">Submit</button>
                                       </div>
                                    </div>
                                 </form>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
                  <!-- <div class="modal-footer">
                     <button type="button" class="btn btn-primary">Save changes</button>
                     <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  </div> -->
            {% elif modalData.modal_type =='update_academic_student_modal' %}
               <div class="modal-header">
                     <h5 class="modal-title">Student Academic Details Update</h5>
                  
                     <button type="button" class="close" data-dismiss="modal" id="closeModal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                     </button>

                     
               </div>
               


               <div class="modal-body">
                  <div class="row">
                     <div class="col-sm-12">
                        <div class="card">
                           <div class="card-body ">
                              <!-- {{ data|dump}} -->
                              <form method="post" enctype="multipart/form-data" action="{{config.baseUrl}}admin/studentAcademicMaster/updateSubmit">
                                 <div class="row">
                                    <input type="hidden" name="id" value="{{modalData.data.id}}">
                                  
                                    
                                    <div class="col-12 col-sm-3">
                                       <div class="form-group">
                                          <label>GR No </label>
                                          <input type="text" required name="GRNo" value="{{modalData.data.GRNo}}" class="form-control" placeholder=" Student GR No">
                                       </div>
                                    </div>

                                    <div class="col-12 col-sm-3">
                                       <div class="form-group">
                                          
                                          <label> Academic year</label>
                                          <select name="academicYear" required class="form-control select">
                                                <option value="">Select year</option>
                                                {% for yy in modalData.data.years %}
                                                <option value="{{yy}}" {{"selected" if (modalData.data.academicYear==yy) else ""}}>{{yy}}</option>
                                                {% endfor %}
                                                
                                          </select>
                                       </div>
                                    </div>

                                    <div class="col-12 col-sm-3">
                                          <div class="form-group">
                                             <label> Select class</label>
                                             <select name="selectClass" required class="form-control select">
                                                   <option value="">Select class</option>
                                                   
                                                   {% for row in modalData.data.classes %}
                                                   <option value="{{row.value}}" {{"selected" if (row.value==modalData.data.studentClass) else ""}}>{{row.key}}</option>
                                                  {% endfor %}
                                             </select>
                                          </div>
                                    </div>

                                       

                                    <div class="col-12 col-sm-3">
                                       <div class="form-group">
                                          <label> Select section</label>
                                          <select name="section" class="form-control select">
                                             <option value="">Select section</option>

                                             <option value="A" {{"selected" if (modalData.data.studentSection=="A") else ""}}>A</option>
                                             <option value="B" {{"selected" if (modalData.data.studentSection=="B") else ""}}>B</option>
                                             <option value="C" {{"selected" if (modalData.data.studentSection=="C") else ""}}>C</option>
                                             <option value="D" {{"selected" if (modalData.data.studentSection=="D") else ""}}>D</option>   
                                             <option value="E" {{"selected" if (modalData.data.studentSection=="E") else ""}}>E</option>
                                             <option value="F" {{"selected" if (modalData.data.studentSection=="F") else ""}}>F</option> 
                                             <option value="G" {{"selected" if (modalData.data.studentSection=="G") else ""}}>G</option>
                                          </select>
                                       </div>
                                       </div>

                                       <div class="col-12 col-sm-3">
                                          <div class="form-group">
                                             <label>Admission fees</label>
                                             <input type="number" placeholder="Ex. 123" value="{{modalData.data.admissionFeeAmt}}" required name="admissionFees" class="form-control">
                                          </div>
                                       </div>

                                       
                                       <div class="col-12 col-sm-3">
                                          <div class="form-group"> 
                                             <label>Select month</label>
                                             <!-- {{modalData.data|dump}} -->
                                             <select class="test dropdownchange form-control" name="monthly_fees" multiple="multiple" id="monthsfeesselection">
                                                  
                                                    {% for row in modalData.data.academic_months %}
                                                       {% set select_var = "" %}
                                                       {% if row.value +'``'+row.key in modalData.data.studentFeesForMonths %}
                                                         {% set select_var = "selected" %}
                                                       {% endif %}
                                                      <option value="{{row.value +'``'+row.key}}" {{select_var}}>{{row.key}}</option>
                                                   {% endfor %}
                                            </select>
                                          </div>
                                       </div>

                                       <div class="col-12 col-sm-3">
                                          <div class="form-group">
                                             <label>Per month fees</label>
                                             <input  type="number" {{"readonly" if ((modalData.data.studentFeesForMonths | length) ==0) else ""}} required name="currentYearMonthFees" id="value_monthsfeesselection" value="{{modalData.data.studentFeesPerMonth}}" class="form-control" >
                                          </div>
                                       </div>

                                       <div class="col-12 col-sm-3">
                                          <div class="form-group">
                                             <label>Prev. year bal.</label>
                                             <input type="number"  required name="previousYearBal" value="{{modalData.data.previousYearPendingFeeAmt}}"  class="form-control">
                                          </div>
                                       </div>
                                       
                                 </div>
                                 <div class="row">
                                   

                                    <div class="col-12 col-sm-3">
                                          <div class="form-group"> 
                                             <label>Month for transport</label>
                                             <select class="test dropdownchange form-control" multiple="multiple" id="transportmonthsfeesselection" name="transportmonths">
                                                    {% for row in modalData.data.academic_months %}
                                                      {% set select_var = "" %}
                                                      {% if row.value +'``'+row.key in modalData.data.studentTransportMonth %}
                                                         {% set select_var = "selected" %}
                                                      {% endif %}
                                                      <option value="{{row.value +'``'+row.key}}" {{select_var}}>{{row.key}}</option>
                                                   {% endfor %}
                                            </select>
                                          </div>
                                    </div>
                                    <div class="col-12 col-sm-3">
                                       <div class="form-group">
                                          <label>Transport fees / month</label>
                                          <input type="number" {{"readonly" if ((modalData.data.studentTransportMonth | length) ==0) else ""}}  required name="transportfeesmonths" id="value_transportmonthsfeesselection" class="form-control"   value="{{modalData.data.studentTransportFeesForMonth}}">
                                       </div>
                                    </div>

                                    <div class="col-12 col-sm-3">
                                       <div class="form-group"> 
                                          <label>Month for Exam fees</label>
                                          <select class="test dropdownchange form-control" multiple="multiple" id="exammonthsfeesselection" name="examfeesmonths">
                                                 {% for row in modalData.data.academic_months %}
                                                 {% set select_var = "" %}
                                                 {% if row.value +'``'+row.key in modalData.data.studentExamFeesForMonths %}
                                                    {% set select_var = "selected" %}
                                                 {% endif %}

                                                 
                                                   <option value="{{row.value +'``'+row.key}}" {{select_var}}>{{row.key}}</option>
                                                {% endfor %}
                                         </select>
                                       </div>
                                      
                                 </div>
                                 <div class="col-12 col-sm-3">
                                    <div class="form-group">
                                       <label>Exam fees for months</label>
                                       <input type="number" {{"readonly" if ((modalData.data.studentExamFeesForMonths | length) ==0) else ""}} required name="examfees" class="form-control" id="value_exammonthsfeesselection" value="{{modalData.data.studentExamFeesAmountForMonth}}">
                                    </div>
                                 </div>
<!-- 
                                   {{modalData.data|dump}} -->
                                 </div>

                                 <div class="row">     
                                    <div class="col-12">
                                       <button type="submit" class="btn btn-primary">Update</button>
                                    </div>
                                 </div>
                              </form>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>

            {% elif modalData.modal_type =='student_fees_payment_modal' %}
               <div class="modal-header">
                  <h5 class="modal-title">Student Fees Pay</h5>
                  <button type="button" class="close" data-dismiss="modal" id="closeModal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                  </button>
               </div>
               <div class="modal-body">
                     <div class="row">
                        <div class="col-sm-12">
                           <div class="card">
                              <div class="card-body">
                              <!-- {{ data|dump}} -->
                                 <form method="post" enctype="multipart/form-data" action="{{config.baseUrl}}admin/studentAcademicMaster/studentPaidFees">
                                    <div class="row">
                                       <input type="hidden" name="id" value="{{modalData.data.id}}">
                                       
                                       <div class="col-12 col-sm-6">
                                             <div class="form-group">
                                                <label> Select Mode</label>
                                                <select name="selectMode" id="selectPaymentMode" required class="form-control select">
                                                   <option value="">Select Mode</option>
                                                   <option value="Cash" >Cash</option>
                                                   <option value="Online" >Online</option>
                                                 
                                                </select>
                                             </div>
                                       </div>

                                       <div class="col-12 col-sm-6">
                                          <div class="form-group">
                                             <label>Fees to be paid</label>
                                             <input type="number" value="" required name="paidAmount" class="form-control">
                                          </div>
                                       </div>
                                    </div>
                                    <div class="row" id="modeOnlineHtmlInput">

                                    </div>
                                    
                                    <div class="row"> 
                                          <div class="col-12">
                                             <button type="submit" class="btn btn-primary">Update</button>
                                          </div>
                                    </div>
                                 </form>
                              </div>
                           </div>
                        </div>
                     </div>
               </div>
            {% elif modalData.modal_type =='student_marksupload_modal' %}
            <div class="modal-header">
               <h5 class="modal-title">Student Marks Upload</h5>
               <button type="button" class="close" data-dismiss="modal" id="closeModal" aria-label="Close">
               <span aria-hidden="true">&times;</span>
               </button>
               <!-- {{modalData.data|dump}} -->
            </div>
            <div class="modal-body">
                  <div class="row">
                     <div class="col-sm-12">
                        <div class="card">
                           <div class="card-body card-body-extra">
                           <!-- {{ data|dump}} -->
                              <form method="post" enctype="multipart/form-data" action="{{config.baseUrl}}admin/studentAcademicMaster/studentMarkUpload">
                                 <div class="row">
                                    <!-- {{modalData.data|dump}} -->
                                    <input type="hidden" name="id" value="{{modalData.data._id}}">
                                    
                                    <div class="col-12 col-sm-4">
                                          <div class="form-group">
                                             <label>Name</label><br>
                                             <label><strong> {{modalData.data.fullname}} </strong> </label>
                                            
                                          </div>
                                    </div>
                                    <div class="col-12 col-sm-4">
                                       <div class="form-group">
                                          <label>Class</label><br>
                                          <label><strong> {{modalData.data.studentClass}} </strong> </label>
                                         
                                       </div>
                                    </div>
                                    <div class="col-12 col-sm-4">
                                       <div class="form-group">
                                          <label>Academic year</label><br>
                                          <label><strong> {{modalData.data.academicYear}} </strong> </label>
                                         
                                       </div>
                                    </div>


                                    <div class="col-12 ">
                                       <div class="col-auto text-end float-end ms-auto">
                                          <a href="javascript:void(0)" id="addButtonSubjectList" studentCLass="{{modalData.data.studentClass}}" class="btn btn-primary btn-sm"><i class="fas fa-plus"></i></a>
                                       </div>
                                    </div>
                                 </div>
                                 <div id="dynamicInputForSubjectMark">

                                    <div class="row">
                                       <div class="col-12 col-sm-3 text-center">
                                          <label><strong>Subject</strong> </label>
                                       </div>
                                       <div class="col-12 col-sm-8">
                                          <div class="row">
                                             <div class="col-12 text-center col-sm-4">
                                                <label class=""> <strong> Half yearly </strong></label>
                                             </div>
                                             <div class="col-12 text-center col-sm-2">
                                                <input type="checkbox" disabled value="1" class="form-check-input" checked required>
                                             </div>
                                          
                                             <div class="col-12 text-center col-sm-4">
                                                <label class=""><strong>Yearly</strong></label>
                                             </div>

                                             <div class="col-12 text-center col-sm-2"  {{modalData.data.isYealy}}>
                                                <input type="checkbox" {{'checked' if(modalData.data.isYealy==true) else '' }} name="year_checkbox" value="1" id="yealycheckboxcheck" class="form-check-input">
                                             </div>
                                            
                                          </div>

                                          <div class="row">
                                             <div class="col-12 text-center col-sm-2">
                                                <label class=""> MM </label>
                                             </div>
                                             <div class="col-12 text-center col-sm-2">
                                                <label class="">  MO </label>
                                             </div>
                                             <div class="col-12 text-center col-sm-2">
                                                <label class=""> <strong> GD </strong></label>
                                             </div>

                                             <div class="col-12 text-center col-sm-2">
                                                <label class=""> MM </label>
                                             </div>
                                             <div class="col-12 text-center col-sm-2">
                                                <label class="">  MO </label>
                                             </div>
                                             <div class="col-12 text-center col-sm-2">
                                                <label class=""> <strong> GD </strong></label>
                                             </div>

                                          </div>
                                       </div>
                                       <div class="col-12 col-sm-1"></div>
                                       
                                    </div>
                                   
                                    <!-- {{modalData.data.resultData|dump}} -->

                                    {% for ra in  modalData.data.resultData %}
                                       <div class="row row-extra">
                                          <div class="col-12 col-sm-2">
                                             <div class="form-group">
                                                <select name="subjectName" class="form-control subject-select-dropdown" readonly required>
                                                   
                                                   <option value="{{ra.subjectKey+'``'+ra.subjectName+'``'+ra.subjectSequence+'``'+ra.justForGrade}}" selected keygradeval="{{ra.justForGrade}}">{{ra.subjectName}}</option>

                                                </select>
                                             </div>
                                          </div>
      
                                          <div class="col-12 col-sm-9 subjectWiseData">
                                             <div class="row row-extra">
                                                <div class="col-6">
                                                   
                                                      <div class="col-12 text-center col-sm-3">
                                                         <input type="text" justForGrade="{{ra.justForGrade}}" required="" {{'readonly' if(ra.justForGrade==true) else ''}} placeholder="" name="hymmdata" notation="mm" comkey="hyt_1" id="mm_hyt_1" value="{{ra.halfYearMarkMM}}" class="markInput form-control">
                                                      </div>
                                                      <div class="col-12 text-center col-sm-3">
                                                            <input type="text" justForGrade="{{ra.justForGrade}}" required="" placeholder="" {{'readonly' if(ra.justForGrade==true) else ''}} name="hymodata" notation="mo" comkey="hyt_1" id="mo_hyt_1"  value="{{ra.halfYearMarkMO}}" class="markInput form-control">
                                                      </div>
                                                      <div class="col-12 text-center col-sm-3">
                                                            <input type="text" justForGrade="{{ra.justForGrade}}" required  placeholder="" {{'readonly' if(ra.justForGrade==false) else ''}} value="{{ra.halfYearSubjectGrade}}" name="hygddata" value="" id="gd_hyt_1" class="markInput form-control">
                                                      </div>
                                                   </div>
                                                </div>
                                                <div class="col-6">
                                                   <div class="row row-extra">

                                                   </div>
                                                </div>

                                               
                                                <div class="col-12 text-center col-sm-1">
                                                      <input type="text" justForGrade="{{ra.justForGrade}}"  {{ 'readonly' if(modalData.data.isYealy==false) else ('required' if(ra.justForGrade==false) else ' readonly required' ) }}    placeholder="" name="ymmdata" notation="mm" comkey="hyt_2" id="mm_hyt_2" value="{{(ra.yearMarkMM if(ra.yearMarkMM) else '') if(modalData.data.isYealy==true) else ''}}" class="markInput yearlyMarkInput form-control">
                                                </div>
                                                <div class="col-12 text-center col-sm-1">
                                                      <input type="text" justForGrade="{{ra.justForGrade}}" {{ 'readonly' if(modalData.data.isYealy==false) else ('required' if(ra.justForGrade==false) else ' readonly required' ) }} placeholder="" name="ymodata" notation="mo" comkey="hyt_2" value="{{(ra.yearMarkMO if(ra.yearMarkMO) else '') if(modalData.data.isYealy==true) else ''}}" id="mo_hyt_2" class="markInput yearlyMarkInput form-control">
                                                </div>
                                                <div class="col-12 text-center col-sm-1">
                                                      <input type="text" justForGrade="{{ra.justForGrade}}" {{ 'readonly' if(modalData.data.isYealy==false) else 'required' }}  placeholder="" name="ygddata" {{'readonly' if(ra.justForGrade==false) else ('readonly' if(modalData.data.isYealy==false) else '' )}} value="{{(ra.yearSubjectGrade if(ra.yearSubjectGrade) else '') if(modalData.data.isYealy==true) else ''}}" id="gd_hyt_2" class="markInput form-control yearlyMarkInput ">
                                                     
                                                      <input type="hidden" name="maxMark" id="mxm_tot_y"  value="{{ra.totalSubjectMark}}">
                                                      <input type="hidden" name="maxObtainMark" id="mom_tot_y" value="{{ra.totalMarkObtainSubject}}">
                                                      <input type="hidden" name="maxObtainGrade" id="mog_tot_y" value="{{ra.finalSubjectWiseGrade}}">
                                                </div>
                                             </div>
                                          </div>
                                         
                                          <div class="col-12 col-sm-1">
                                                <a href="javascript:void(0)" id="minusButtonSubjectList" class="btn btn-danger btn-sm"><i class="fas fa-minus"></i></a>
                                          </div>
                                       </div>
                                    {% endfor %}
                                   
                                 </div>
                                 
                                 <div class="row"> 
                                       <div class="col-12">
                                          <button type="submit" class="btn btn-primary">Upload Marks</button>
                                       </div>
                                 </div>
                              </form>
                           </div>
                        </div>
                     </div>
                  </div>
            </div>
               
            {% endif %}
    
    </div>
  </div>
